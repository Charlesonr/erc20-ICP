import * as Exit from "@effect/io/Exit";
import { Signal } from "callbag-effect-ts/Source";
export const forEach = (f) => (r) => {
    let talkback;
    return (signal, data) => {
        if (signal === Signal.START) {
            talkback = data;
            talkback(Signal.DATA);
        }
        else if (signal === Signal.DATA) {
            r.unsafeRunAsyncWith(f(data), (exit) => {
                if (Exit.isFailure(exit)) {
                    talkback(Signal.END, exit.cause);
                }
                else {
                    talkback(Signal.DATA);
                }
            });
        }
    };
};
//# sourceMappingURL=forEach.js.map