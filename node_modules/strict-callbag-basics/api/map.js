export const map_ = (self, f) => map(f)(self);
export const map = (f) => (source) => (start, sink) => {
    if (start !== 0)
        return;
    let index = 0;
    source(0, (t, d) => {
        sink(t, t === 1 ? f(d, index++) : d);
    });
};
