export const fromThunk = (f) => (_, sink) => {
    let unsubed = false;
    let running = false;
    sink(0, (signal) => {
        if (signal === 1) {
            if (!running) {
                running = true;
                sink(1, f());
            }
            if (!unsubed) {
                sink(2, undefined);
            }
        }
        else if (signal === 2) {
            unsubed = true;
        }
    });
};
