import { Effect, Maybe, Duration } from "dfx/common";
import { Success } from "dfx/utils/effect";
export type BucketDetails = {
    key: "global" | string;
    resetAfter: number;
    limit: number;
};
export interface RateLimitStore {
    hasBucket: (bucketKey: string) => Effect<never, never, boolean>;
    putBucket: (bucket: BucketDetails) => Effect<never, never, void>;
    getBucketForRoute: (route: string) => Effect<never, never, Maybe<BucketDetails>>;
    putBucketRoute: (route: string, bucketKey: string) => Effect<never, never, void>;
    incrementCounter: (key: string, window: number, limit: number) => Effect<never, never, readonly [count: number, ttl: number]>;
}
export declare const RateLimitStore: import("../common.js").Tag<RateLimitStore>;
export declare const LiveMemoryRateLimitStore: import("../common.js").Layer<never, never, RateLimitStore>;
declare const makeLimiter: import("../common.js").Effect<import("../Log/index.js").Log | RateLimitStore, never, {
    maybeWait: (key: string, window: Duration, limit: number, multiplier?: number) => import("../common.js").Effect<never, never, void>;
}>;
export interface RateLimiter extends Success<typeof makeLimiter> {
}
export declare const RateLimiter: import("../common.js").Tag<RateLimiter>;
export declare const LiveRateLimiter: import("../common.js").Layer<import("../Log/index.js").Log | RateLimitStore, never, RateLimiter>;
export {};
//# sourceMappingURL=index.d.ts.map