import * as tsplus_module_1 from "callbag-effect-ts/Source/filter";
import * as tsplus_module_2 from "@effect/io/Effect";
import * as tsplus_module_3 from "@fp-ts/data/Option";
import * as tsplus_module_4 from "@effect/io/Ref";
import * as tsplus_module_5 from "@fp-ts/data/Function";
export const opCode = (source) => (code) => tsplus_module_1.filter((p) => p.op === code)(source);
const maybeUpdateRef = (f, ref) => tsplus_module_5.flow(f, (o) => tsplus_module_3.match(tsplus_module_2.unit, (a) => tsplus_module_4.set(tsplus_module_3.some(a))(ref))(o));
export const latest = (f) => tsplus_module_2.map((ref) => [ref, maybeUpdateRef(f, ref)])(tsplus_module_4.make(tsplus_module_3.none));
//# sourceMappingURL=utils.js.map